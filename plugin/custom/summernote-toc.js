!function(t){var o={};function n(c){if(o[c])return o[c].exports;var a=o[c]={i:c,l:!1,exports:{}};return t[c].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,o,c){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:c})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var a in t)n.d(c,a,function(o){return t[o]}.bind(null,a));return c},n.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="/",n(n.s=6)}({0:function(t,o){t.exports=$},6:function(t,o,n){var c,a,e;a=[n(0)],void 0===(e="function"==typeof(c=function(t){t.extend(t.summernote.options,{toc:{selector:null,prefix:null}}),t.extend(t.summernote.plugins,{toc:function(o){var n=t.summernote.range,c=t.summernote.dom,a=this,e=t.summernote.ui,r=(o.layoutInfo.note,o.layoutInfo.editor),i=o.layoutInfo.editable,s=o.layoutInfo.editingArea,d=o.layoutInfo.toolbar,h=(o.layoutInfo.statusbar,o.modules,o.options),l=h.langInfo;this.$document=t(document);var f=h.toc.prefix||"summernote",m=navigator.appVersion.indexOf("Mac")>-1,u="CTRL+SHIFT+A";u=m?"CMD+⇧+A":"CTRL+SHIFT+A",this.initialize=function(){0==t("#".concat(f,"-toc-style")).length&&(this.css=t("<style>").html(".".concat(f,"-toc-anchor{position:relative;}.").concat(f,'-toc-anchor::before{content:"#";opacity:0.6;position:absolute;left:-0.7em;visibility:hidden;}.').concat(f,"-toc-anchor:hover::before{visibility:visible;}")),this.css.attr("id","".concat(f,"-toc-style")),t(document.head).append(this.css)),0==t("#".concat(f,"-toc-temp-style")).length&&(this.tempcss=t("<style>").html(".".concat(f,"-toc-mark{background-color:yellow;}.").concat(f,"-toc-mark::before{visibility:visible;}.").concat(f,"-toc-form-container{max-height:700px;overflow-y:auto;}.").concat(f,"-toc-form-group{display:flex;}.").concat(f,"-toc-form-group>.").concat(f,"-toc-data-id{width:50%;}.").concat(f,"-toc-form-group>.").concat(f,"-toc-data-text{width:50%;}")),this.tempcss.attr("id","".concat(f,"-toc-temp-style")),t(document.head).append(this.tempcss)),this.$toc=t('<div class="'.concat(f,'-toc"></div>')),h.toc.selector?t(h.toc.selector).append(this.$toc):d.append(this.$toc),this.$dialog=e.dialog({title:"".concat(l.toc.editAnchortext),fade:h.dialogsFade,body:'\n                    <div class="form-group '.concat(f,'-toc-form-group">\n                        <b>').concat(l.toc.message,"</b>\n                    </div>"),footer:'<button href="#" class="btn btn-primary '.concat(f,'-toc-btn">').concat(l.toc.addtoc,"</button>")}).render().appendTo(h.container),this.$dialog.find(".modal-body").addClass("".concat(f,"-toc-form-container")),s.css("display","flex").css("flex-direction","row"),i.css("width","100%"),this.$editAnchorContainer=t('<div style="background-color:rgba(0,0,0,.03);border-right: 1px solid rgba(0,0,0,.125); width:30em; overflow-y:auto; " class="'.concat(f,'-edit-anchor-container"><div style="width:20em;" class="').concat(f,'-edit-anchor"></div></div>')),s.prepend(this.$editAnchorContainer),this.$editAnchorContainer.hide(),this.$editAnchor=s.find(".".concat(f,"-edit-anchor")),this.$editAnchor.css("padding","1em 0"),i.css("padding","1.5rem")},this.wrapCommand=function(t){return function(){o.invoke("beforeCommand"),t.apply(this,arguments),o.invoke("afterCommand")}},this.events={"summernote.init":function(t,n){n.editable.on("keyup",(function(t){8===t.keyCode&&setTimeout((function(){0==o.invoke("code").length&&o.invoke("pasteHTML","<p><br></p>")}),1)})),n.editable.on("keydown",(function(t){var n=t.keyCode,c=t.ctrlKey,e=t.shiftKey;65==n&&c&&e&&(o.invoke("beforeCommand"),a.anchor(),o.invoke("afterCommand"))})),n.statusbar.on("mousedown",(function(t){EDITABLE_PADDING=24,t.preventDefault(),t.stopPropagation();var o=function(t){var o=i.outerHeight();a.$editAnchorContainer.height(o)};a.$document.on("mousemove",o).one("mouseup",(function(){a.$document.off("mousemove",o)}))}))},"summernote.enter":function(){setTimeout((function(){o.invoke("beforeCommand");var a=n.create(),e=c.ancestor(a.commonAncestor(),(function(o){return o&&t(o).hasClass("".concat(f,"-toc-anchor"))}))||t(a.sc).find(".".concat(f,"-toc-anchor"));e&&i.find("#".concat(t(e).attr("id"))).length>0&&t(e).removeAttr("id").removeAttr("data-anchortext").removeClass(["".concat(f,"-toc-anchor"),"".concat(f,"-toc-mark")]),o.invoke("afterCommand")}),1)},"summernote.codeview.toggled":function(){o.invoke("codeview.isActivated")?(a.displayEdit="none"==a.$editAnchorContainer.css("display"),a.$editAnchorContainer.hide()):(!a.displayEdit&&a.$editAnchorContainer.show(),a.resetEditAnchor())},"summernote.change":function(){a.resetHeight()}},this.resetHeight=function(){var t=i.outerHeight();a.$editAnchorContainer.height(t)},this.resetEditAnchor=function(n){a.resetHeight();var c=r.find(".".concat(f,"-toc-anchor[id]"));a.$editAnchor.html("<ul>"),c.each((function(c,e){var i=t(e).attr("id"),s=t(e).attr("data-anchortext"),d=t("<a>").text(s).attr("href","#"+i).css("flex","2").css("align-self","center").css("overflow","hidden").css("text-overflow","ellipsis").css("white-space","nowrap"),h=t("<input>").attr("value",s).addClass("".concat(f,"-toc-data-text")),l=t("<button>").text("編輯").addClass(["btn","btn-primary"]),m=t("<button>").text("移除").addClass(["btn","btn-primary"]),u=t("<button>").text("確認").addClass(["btn","btn-primary"]),p=t("<button>").text("取消").addClass(["btn","btn-primary"]),v=t("<div>").append([l,u,p,m]).css("flex","2").css("display","flex").css("justify-content","space-evenly"),g=t("<li>").addClass(["form-group","".concat(f,"-toc-form-group")]).append([d,h,v]);function b(){d.show(),l.show(),m.show(),h.hide(),u.hide(),p.hide()}a.$editAnchor.find("ul").append(g),b(),l.click((function(t){d.hide(),l.hide(),m.hide(),h.show(),u.show(),p.show()})),h.on("keydown",(function(t){13===t.keyCode&&(o.invoke("beforeCommand"),t.preventDefault(),r.find(".".concat(f,"-toc-anchor#").concat(i)).attr("data-anchortext",h.val()),a.resetEditAnchor(),b(),o.invoke("afterCommand")),27===t.keyCode&&b()})),u.click(a.wrapCommand((function(t){r.find(".".concat(f,"-toc-anchor#").concat(i)).attr("data-anchortext",h.val()),a.resetEditAnchor(),b()}))),p.click((function(t){b()})),m.click(a.wrapCommand((function(t){r.find("#".concat(i)).removeClass(["".concat(f,"-toc-anchor"),"".concat(f,"-toc-mark")]).removeAttr("data-anchortext"),a.$toc.find("#".concat(i)).length&&a.$toc.find("#".concat(i)).remove(),r.find("#".concat(i)).removeAttr("id"),a.resetEditAnchor()}))),n&&n.bind("hideEditAnchor",(function(){l.off(),m.off(),h.off(),u.off(),p.off()}))}))},o.memo("button.editAnchor",(function(){return e.button({className:"".concat(f,"-btn-edit-anchor"),contents:'<i class="note-icon '.concat(f,'-mark-anchor"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-list" viewBox="0 0 16 16">\n                    <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>\n                    <path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>\n                  </svg></i>'),tooltip:l.toc.editAnchor,click:function(o){var n=t(o.target).closest("button");a.$editAnchorContainer.animate({width:"toggle"}),n.toggleClass("".concat(f,"-show-edit-anchor")),n.hasClass("".concat(f,"-show-edit-anchor"))?(n.on("hideEditAnchor"),a.resetEditAnchor(n)):(n.trigger("hideEditAnchor"),n.off("hideEditAnchor"))}}).render()})),o.memo("button.markAnchor",(function(){return e.button({className:"".concat(f,"-btn-mark-anchor"),contents:'<i class="note-icon '.concat(f,'-mark-anchor"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-binoculars-fill" viewBox="0 0 16 16">\n                    <path d="M4.5 1A1.5 1.5 0 0 0 3 2.5V3h4v-.5A1.5 1.5 0 0 0 5.5 1h-1zM7 4v1h2V4h4v.882a.5.5 0 0 0 .276.447l.895.447A1.5 1.5 0 0 1 15 7.118V13H9v-1.5a.5.5 0 0 1 .146-.354l.854-.853V9.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v.793l.854.853A.5.5 0 0 1 7 11.5V13H1V7.118a1.5 1.5 0 0 1 .83-1.342l.894-.447A.5.5 0 0 0 3 4.882V4h4zM1 14v.5A1.5 1.5 0 0 0 2.5 16h3A1.5 1.5 0 0 0 7 14.5V14H1zm8 0v.5a1.5 1.5 0 0 0 1.5 1.5h3a1.5 1.5 0 0 0 1.5-1.5V14H9zm4-11H9v-.5A1.5 1.5 0 0 1 10.5 1h1A1.5 1.5 0 0 1 13 2.5V3z"/>\n                  </svg></i>'),tooltip:l.toc.markAnchor,click:a.wrapCommand((function(o){var n=t(o.target).closest("button");n.find(".".concat(f,"-toc-mark")).length?(n.find(".".concat(f,"-mark-anchor")).removeClass("".concat(f,"-toc-mark")),i.find(".".concat(f,"-toc-anchor[id]")).removeClass("".concat(f,"-toc-mark"))):(n.find(".".concat(f,"-mark-anchor")).addClass("".concat(f,"-toc-mark")),i.find(".".concat(f,"-toc-anchor[id]")).addClass("".concat(f,"-toc-mark")))}))}).render()})),this.anchor=function(){var o=n.create();if(o){var e=c.ancestor(o.commonAncestor(),(function(t){return t&&/DIV|P|LI|H[1-7]|SPAN/.test(t.nodeName.toUpperCase())}));if(i.find(e).length>0){var r=t(e).text(),s=t(e).text();if(0==(s=s.replace(/[\s!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\]\^`\{\|\}~]/g,"-")).length)return t(e).removeClass(["".concat(f,"-toc-anchor"),"".concat(f,"-toc-mark")]),void a.resetEditAnchor();if(t(e).attr("id")===s)t(e).toggleClass("".concat(f,"-toc-anchor"));else{for(var h=0;i.find("#".concat(s).concat(h||"")).length;)h+=1;t(e).attr("id","".concat(s).concat(h||"")).toggleClass("".concat(f,"-toc-anchor")).attr("data-anchortext",r)}d.find(".".concat(f,"-btn-mark-anchor .").concat(f,"-toc-mark")).length&&t(e).hasClass("".concat(f,"-toc-anchor"))?t(e).addClass("".concat(f,"-toc-mark")):t(e).removeClass("".concat(f,"-toc-mark"))}a.resetEditAnchor()}},o.memo("button.anchor",(function(){return e.button({className:"".concat(f,"-anchor"),contents:'<i class="note-icon">#</i>',tooltip:"".concat(l.toc.insertanchor," (").concat(u,")"),click:a.wrapCommand((function(t){a.anchor()}))}).render()})),this.resetTOC=function(){a.$toc.html(""),r.find(".".concat(f,"-toc-anchor")).each((function(o,n){var c=t(n).attr("data-anchortext"),e=t(n).attr("id"),r=t("<a>").attr("href","#"+e);r.text(c);var i=t("<li>").attr("id",e).append(r);a.$toc.append(i)}))},this.showDialog=function(){e.showDialog(this.$dialog);var o=a.$dialog.find(".modal-body"),n=r.find(".".concat(f,"-toc-anchor[id]"));if(0!=n.length){o.html('\n                <div class="form-group '.concat(f,'-toc-form-group">\n                    <b class="').concat(f,'-toc-data-id">id</b>\n                    <b class="').concat(f,'-toc-data-text">').concat(l.toc.anchortext,"</b>\n                </div>")),n.each((function(n,c){var a=t(c).attr("id"),e=t(c).attr("data-anchortext"),r=t("<label>").text(a).addClass("".concat(f,"-toc-data-id")),i=t("<input>").attr("value",e).attr("id",a).addClass("".concat(f,"-toc-data-text")),s=t("<div>").addClass(["form-group","".concat(f,"-toc-form-group")]).append(r).append(i);o.append(s)}));var c=a.$dialog.find(".modal-footer .".concat(f,"-toc-btn"));c.click(a.wrapCommand((function(o){e.hideDialog(a.$dialog),a.$dialog.find(".".concat(f,"-toc-data-text")).not("b").each((function(o,n){var c=t(n).val(),a=t(n).attr("id");r.find(".".concat(f,"-toc-anchor#").concat(a)).attr("data-anchortext",c)})),a.resetTOC(),a.resetEditAnchor()}))),e.onDialogHidden(a.$dialog,(function(){c.off()}))}else o.html('\n                    <div class="form-group '.concat(f,'-toc-form-group">\n                        <b>').concat(l.toc.message,"</b>\n                    </div>"))},o.memo("button.toc",(function(){return e.button({className:"".concat(f,"-toc"),contents:'<i class="note-icon">'.concat('\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">\n                <path d="M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.001 1.001 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>\n                <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 0 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 0 0-4.243-4.243L6.586 4.672z"/>\n            </svg>',"</i>"),tooltip:l.toc.addtoc,click:function(t){o.invoke("editor.saveRange"),a.showDialog(),o.invoke("editor.restoreRange")}}).render()})),a.destroy=function(){e.hideDialog(this.$dialog),this.$dialog.remove(),this.$editAnchorContainer.remove(),this.tempcss&&t(this.tempcss).remove()}}}),t.extend(!0,t.summernote.lang,{"zh-TW":{toc:{anchor:"錨點",toc:"目錄",anchortext:"錨點文字",editAnchortext:"編輯錨點文字",addtoc:"新增目錄",insertanchor:"插入錨點",message:"目前尚無錨點",markAnchor:"檢視錨點",editAnchor:"編輯錨點"}},"en-US":{toc:{anchor:"anchor",toc:"toc",anchortext:"anchor text",editAnchortext:"Edit anchor text",addtoc:"add toc",insertanchor:"insert anchor",message:"Cannot find any anchor",markAnchor:"mark anchor",editAnchor:"edit anchor"}}})})?c.apply(o,a):c)||(t.exports=e)}});